<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Wednus Darwin: Oracle.js File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Oracle.js File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Wednus Oracle class. 
<p>
This file contains the class definition of the <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588" title="Oracle class.">W.Oracle</a>. Oracle implements an abstract time manager which distributes tick signal to its member objects such as the instances of the <a class="el" href="World_8js.html#25ce45b286d5c9e26546c965c1e3e879" title="World class.">W.World</a> class; All world instances of an oracle shares only one clock. <dl class="author" compact><dt><b>Author:</b></dt><dd>Sundew H. Shin </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.2.0 </dd></dl>

<p>Definition in file <a class="el" href="Oracle_8js-source.html">Oracle.js</a>.</p>

<p>

<p>
<a href="Oracle_8js-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">W&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Oracle class.  <a href="#7877e1b515e569f905b0759abfab9588"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a> prototype&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Oracle_8js.html#d7c41101ebae31b9ad396620c8b13bea">add</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">register a world into the world pool of oracle  <a href="#d7c41101ebae31b9ad396620c8b13bea"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a> prototype&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Oracle_8js.html#89f3a6452d0a89488aaeaa61b57e00c2">run</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">distribute ticks to each world  <a href="#89f3a6452d0a89488aaeaa61b57e00c2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a> prototype&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Oracle_8js.html#6a60b422bade87c43e4fe20d946c9f8c">pause</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">pause all worlds registered to this oracle  <a href="#6a60b422bade87c43e4fe20d946c9f8c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a> prototype&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Oracle_8js.html#612a50ec53262bc59e147e9d8208d3db">resume</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">resume paused worlds registered to this oracle  <a href="#612a50ec53262bc59e147e9d8208d3db"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a> prototype&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Oracle_8js.html#4c706a6aca9e03f79366c1a4a3620dad">showClock</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">show clock  <a href="#4c706a6aca9e03f79366c1a4a3620dad"></a><br></td></tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="7877e1b515e569f905b0759abfab9588"></a><!-- doxytag: member="Oracle.js::Oracle" ref="7877e1b515e569f905b0759abfab9588" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Oracle class. 
<p>
This class defines the class generates periodic events (tick) to the added objects (world). world object requires one method:<ul>
<li>.tick - method which will get the tick for the world</li></ul>
<p>
and supports one presentation layer:<ul>
<li>.body (optional: div element) - presentation layer to be appended on to the W.body</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>{Object}</em>&nbsp;</td><td>args extend/override constructor w/ this passed args object </td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="test.html#_test000016">Test:</a></b></dt><dd><a href="../../test/Oracle.html">An Oracle instance (default construction)</a> </dd></dl>

<p>Definition at line <a class="el" href="Oracle_8js-source.html#l00026">26</a> of file <a class="el" href="Oracle_8js-source.html">Oracle.js</a>.</p>

</div>
</div><p>
<a class="anchor" name="d7c41101ebae31b9ad396620c8b13bea"></a><!-- doxytag: member="Oracle.js::add" ref="d7c41101ebae31b9ad396620c8b13bea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a> prototype <a class="el" href="World_8js.html#95df163a8f5d1877147fb94735aa15d0">add</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> function(world){
  this.worlds[this.worlds.length] = world;
  world.oracle = <span class="keyword">this</span>;
}
</pre></div>register a world into the world pool of oracle 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>{World}</em>&nbsp;</td><td>world a world to be added </td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="test.html#_test000017">Test:</a></b></dt><dd><a href="../../test/Oracle_with_multiple_consumers.html">one oracle and multiple worlds (tick consumers)</a> </dd></dl>

<p>Definition at line <a class="el" href="Oracle_8js-source.html#l00069">69</a> of file <a class="el" href="Oracle_8js-source.html">Oracle.js</a>.</p>

</div>
</div><p>
<a class="anchor" name="89f3a6452d0a89488aaeaa61b57e00c2"></a><!-- doxytag: member="Oracle.js::run" ref="89f3a6452d0a89488aaeaa61b57e00c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a> prototype <a class="el" href="Oracle_8js.html#89f3a6452d0a89488aaeaa61b57e00c2">run</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> function(){
  var world;
  <span class="keywordflow">for</span>(var i = 0; i &lt; this.worlds.length; ++i){
    world = this.worlds[i];
    <span class="keywordflow">if</span>(!world.paused){
      <span class="keywordflow">if</span>(world.ticks == world.delay){
        
        <span class="keywordflow">if</span>(world.tick)
          world.tick();
        
        <span class="keywordflow">if</span>(this.isClockShown &amp;&amp; world.clock)
          
          world.clock.innerHTML = ++world.time;
        
        world.ticks = 0;
      }<span class="keywordflow">else</span> ++world.ticks;
    }
  }
  setTimeout(<span class="stringliteral">'W.darwin.oracles['</span>+ this.<span class="keywordtype">id</span> +<span class="stringliteral">'].run()'</span>, 0);
}
</pre></div>distribute ticks to each world 
<p>

<p>Definition at line <a class="el" href="Oracle_8js-source.html#l00077">77</a> of file <a class="el" href="Oracle_8js-source.html">Oracle.js</a>.</p>

</div>
</div><p>
<a class="anchor" name="6a60b422bade87c43e4fe20d946c9f8c"></a><!-- doxytag: member="Oracle.js::pause" ref="6a60b422bade87c43e4fe20d946c9f8c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a> prototype <a class="el" href="Oracle_8js.html#6a60b422bade87c43e4fe20d946c9f8c">pause</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> function(){
  var world;
  <span class="keywordflow">for</span>(var i = 0; i &lt; this.worlds.length; ++i){
    world = this.worlds[i];
    world.paused = <span class="keyword">true</span>;
  }
}
</pre></div>pause all worlds registered to this oracle 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>maybe we can also temporarily disable 'setTimeout' itself for releasing resource. </dd></dl>
<dl compact><dt><b><a class="el" href="test.html#_test000018">Test:</a></b></dt><dd><a href="../../test/Oracle_pause_resume.html">pause/resume oracle</a> </dd></dl>

<p>Definition at line <a class="el" href="Oracle_8js-source.html#l00105">105</a> of file <a class="el" href="Oracle_8js-source.html">Oracle.js</a>.</p>

</div>
</div><p>
<a class="anchor" name="612a50ec53262bc59e147e9d8208d3db"></a><!-- doxytag: member="Oracle.js::resume" ref="612a50ec53262bc59e147e9d8208d3db" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a> prototype <a class="el" href="Oracle_8js.html#612a50ec53262bc59e147e9d8208d3db">resume</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> function(){
  var world;
  <span class="keywordflow">for</span>(var i = 0; i &lt; this.worlds.length; ++i){
    world = this.worlds[i];
    world.paused = <span class="keyword">false</span>;
  }
}
</pre></div>resume paused worlds registered to this oracle 
<p>
<dl compact><dt><b><a class="el" href="test.html#_test000019">Test:</a></b></dt><dd><a href="../../test/Oracle_pause_resume.html">pause/resume oracle</a> </dd></dl>

<p>Definition at line <a class="el" href="Oracle_8js-source.html#l00118">118</a> of file <a class="el" href="Oracle_8js-source.html">Oracle.js</a>.</p>

</div>
</div><p>
<a class="anchor" name="4c706a6aca9e03f79366c1a4a3620dad"></a><!-- doxytag: member="Oracle.js::showClock" ref="4c706a6aca9e03f79366c1a4a3620dad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">W <a class="el" href="Oracle_8js.html#7877e1b515e569f905b0759abfab9588">Oracle</a> prototype <a class="el" href="Oracle_8js.html#4c706a6aca9e03f79366c1a4a3620dad">showClock</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> function(isOn){var <span class="keyword">self</span> = <span class="keyword">this</span>;
  
  <span class="keywordflow">if</span>(this.worlds.length == 0){
    W.event(window, <span class="stringliteral">'onload'</span>, clock_on_off);
  }<span class="keywordflow">else</span> clock_on_off();

  function clock_on_off(){
    <span class="keywordflow">for</span>(var i = 0; i &lt; <span class="keyword">self</span>.worlds.length; ++i){
      var world = <span class="keyword">self</span>.worlds[i];
      
      <span class="keywordflow">if</span>(world.body){
        <span class="keywordflow">if</span>(isOn){
          <span class="keywordflow">if</span>(!world.clock){
            world.clock = W.style(<span class="stringliteral">'div'</span>, <span class="stringliteral">'color:lime;fontSize:11px;display:none'</span>);
            world.body.appendChild(world.clock);
          }
          world.clock.style.display = <span class="stringliteral">'block'</span>;
          <span class="keyword">self</span>.isClockShown = <span class="keyword">true</span>;
        }<span class="keywordflow">else</span>{
          world.clock.style.display = <span class="stringliteral">'none'</span>;
          <span class="keyword">self</span>.isClockShown = <span class="keyword">false</span>;
        }
      }
    }
  };
}
</pre></div>show clock 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>{Boolean}</em>&nbsp;</td><td>isOn true if the clock to be shown on each world<br>
otherwise, false </td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="test.html#_test000020">Test:</a></b></dt><dd><a href="../../test/Oracle_showClock.html">reveal clock on/off</a> </dd></dl>

<p>Definition at line <a class="el" href="Oracle_8js-source.html#l00133">133</a> of file <a class="el" href="Oracle_8js-source.html">Oracle.js</a>.</p>

</div>
</div><p>
</div>
<hr size=1>
<a href='http://wednus.com' style="text-decoration:none">
<small><font style="font-size: 11px;" color="gray">
<font style="font-size: 12px;" color="navy"><b>we</b></font>&nbsp;
<font style="font-size: 12px;" color="green"><b>d</b></font>o<font style="font-size: 12px;" color="orange"><b>n</b></font>'t&nbsp;
<font style="font-size: 12px;" color="brown"><b>us</b></font>e toilet paper; we use our bare hands.</font></small>
</a>
